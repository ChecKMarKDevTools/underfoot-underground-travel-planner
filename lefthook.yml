pre-commit:
  parallel: true
  commands:
    format-and-lint:
      run: |
        STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)
        if [ -n "$STAGED_FILES" ]; then
          echo "$STAGED_FILES" | xargs -r npm run format
          echo "$STAGED_FILES" | xargs -r npm run lint
          echo "$STAGED_FILES" | xargs -r git add
        fi
    spellcheck:
      run: npm run spellcheck -- --files $(git diff --cached --name-only --diff-filter=ACM | xargs)

commit-msg:
  parallel: true
  commands:
    commitlint:
      run: npm run commitlint -- {1}
